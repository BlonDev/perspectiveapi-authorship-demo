<div>
  <!-- Feedback thresholds -->
  <div class="setting">
    <div>Feedback Threshold</div>
    <mat-slider
      class="slider"
      [invert]="true"
      [min]="0"
      [max]="100"
      [step]="1"
      [disabled]="customizeScoreThresholds"
      [(ngModel)]="sliderValue"
      (change)="onSliderValueChange($event); onDemoSettingsChanged()"></mat-slider>
    <div [ngClass]="{'disabled': customizeScoreThresholds}">
      Show feedback when a comment has a toxicity score of {{100 - sliderValue}}-100%.
    </div>

    <div class="customizeSwitch">
      <mat-slide-toggle
        [(ngModel)]="customizeScoreThresholds"
        (change)="onDemoSettingsChanged()">Customize</mat-slide-toggle>
    </div>
  </div>
  <div class="setting customizableSetting" *ngIf="customizeScoreThresholds">
    <mat-input-container [floatPlaceholder]="'always'">
      <input matInput [(ngModel)]="scoreThresholds[0]"
             (input)="scoreThresholds = scoreThresholds.slice(); onDemoSettingsChanged()"
             type="number"
             placeholder="Min threshold for displaying feedback"/>
    </mat-input-container>
    <mat-input-container [floatPlaceholder]="'always'">
      <input matInput [(ngModel)]="scoreThresholds[1]"
             (input)="scoreThresholds = scoreThresholds.slice(); onDemoSettingsChanged()"
             type="number"
             placeholder="Threshold for medium toxicity"/>
    </mat-input-container>
    <mat-input-container [floatPlaceholder]="'always'">
      <input matInput [(ngModel)]="scoreThresholds[2]"
             (input)="scoreThresholds = scoreThresholds.slice(); onDemoSettingsChanged()"
             type="number"
             placeholder="Threshold for high toxicity"/>
    </mat-input-container>
  </div>

  <!-- Configuration for user suggestions. -->
  <div class="setting">
    <mat-form-field>
      <mat-select placeholder="Correction style"
                  floatPlaceholder="always"
                  [(ngModel)]="configuration"
                  (change)="onDemoSettingsChanged()">
        <mat-option *ngFor="let configuration of configurations" [value]="configuration">
          {{ configuration }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Loading icon/widget style. -->
  <div class="setting">
    <mat-form-field>
      <mat-select placeholder="Loading icon style"
                  floatPlaceholder="always"
                  [(ngModel)]="selectedLoadingIconStyle"
                  (change)="onDemoSettingsChanged()">
        <mat-option *ngFor="let loadingIconStyle of loadingIconStyles"
                   [value]="loadingIconStyle">
          {{loadingIconStyle}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Feedback message -->
  <div class="setting">
    <mat-form-field>
      <mat-select placeholder="Feedback message"
                  floatPlaceholder="always"
                  [disabled]="useCustomFeedbackText"
                  [(ngModel)]="selectedFeedbackTextScheme"
                  (change)="onDemoSettingsChanged()">
        <mat-option *ngFor="let feedbackTextScheme of feedbackTextSchemes"
                    [value]="feedbackTextScheme">
          {{feedbackTextScheme.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div class="customizeSwitch">
      <mat-slide-toggle [(ngModel)]="useCustomFeedbackText">Customize</mat-slide-toggle>
    </div>
  </div>

  <div class="setting customizableSetting" *ngIf="useCustomFeedbackText">
    <div>
      <mat-input-container class="feedbackText" [floatPlaceholder]="'always'">
        <input matInput [(ngModel)]="customFeedbackTextScheme[0]"
               (input)="customFeedbackTextScheme = customFeedbackTextScheme.slice(); onDemoSettingsChanged()"
               placeholder="Feedback text for a low toxicity"/>
      </mat-input-container>
    </div>

    <div>
      <mat-input-container class="feedbackText" [floatPlaceholder]="'always'">
        <input matInput [(ngModel)]="customFeedbackTextScheme[1]"
               (input)="customFeedbackTextScheme = customFeedbackTextScheme.slice(); onDemoSettingsChanged()"
               placeholder="Feedback text for a medium toxicity"/>
      </mat-input-container>
    </div>

    <div>
      <mat-input-container class="feedbackText" [floatPlaceholder]="'always'">
        <input matInput [(ngModel)]="customFeedbackTextScheme[2]"
               (input)="customFeedbackTextScheme = customFeedbackTextScheme.slice(); onDemoSettingsChanged()"
               placeholder="Feedback text for a high toxicity"/>
      </mat-input-container>
    </div>
  </div>

  <!-- Color theme -->
  <div class="setting">
    <mat-form-field>
      <mat-select placeholder="Color theme"
                  floatPlaceholder="always"
                  [(ngModel)]="selectedColorScheme"
                  [disabled]="useCustomColorScheme"
                  (change)="onDemoSettingsChanged()">
        <mat-option *ngFor="let colorScheme of colorSchemes" [value]="colorScheme">
          {{colorScheme.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div class="customizeSwitch">
      <mat-slide-toggle [(ngModel)]="useCustomColorScheme"
                        (change)="onDemoSettingsChanged()">Customize</mat-slide-toggle>
    </div>
  </div>

  <div class="setting customizableSetting" *ngIf="useCustomColorScheme">
    <input readonly
           [(colorPicker)]="customColorScheme[0]"
           (colorPickerChange)="customColorScheme = customColorScheme.slice(); onDemoSettingsChanged()"
           [style.background]="customColorScheme[0]"
           class="colorPicker"/>
    <input readonly
           [(colorPicker)]="customColorScheme[1]"
           (colorPickerChange)="customColorScheme = customColorScheme.slice(); onDemoSettingsChanged()"
           [style.background]="customColorScheme[1]"
           class="colorPicker"/>
    <input readonly
           [(colorPicker)]="customColorScheme[2]"
           (colorPickerChange)="customColorScheme = customColorScheme.slice(); onDemoSettingsChanged()"
           [style.background]="customColorScheme[2]"
           class="colorPicker"/>
    <button mat-raised-button (click)="resetToDefaultColors(); onDemoSettingsChanged()">Reset to default colors</button>
  </div>


  <!-- Other settings -->
  <div class="setting">
    <mat-slide-toggle [(ngModel)]="showPercentage" (change)="onDemoSettingsChanged()">Show percentage
    </mat-slide-toggle>
  </div>

  <div class="setting">
    <mat-slide-toggle [(ngModel)]="showMoreInfoLink" (change)="onDemoSettingsChanged()">Show more info link
    </mat-slide-toggle>
  </div>

  <div class="setting">
    <mat-slide-toggle [(ngModel)]="hideLoadingIconAfterLoad"
                      (change)="onDemoSettingsChanged()">Hide loading icon after load
    </mat-slide-toggle>
  </div>

  <div class="setting">
    <mat-slide-toggle [(ngModel)]="hideLoadingIconForScoresBelowMinThreshold"
      (change)="onDemoSettingsChanged()">Hide loading icon for scores below the minimum threshold.
    </mat-slide-toggle>
  </div>

  <div class="setting">
    <mat-slide-toggle [(ngModel)]="useGapi"
                      (change)="updateApiKey($event); onDemoSettingsChanged()">Use gapi
    </mat-slide-toggle>
    <mat-input-container>
      <input matInput
             [disabled]="!useGapi"
             [(ngModel)]="apiKey"
             (input)="onDemoSettingsChanged()"
             placeholder="API key"/>
    </mat-input-container>
  </div>

  <div class="setting">
    <mat-input-container>
      <input matInput
             [(ngModel)]="userFeedbackPromptText"
             (input)="onDemoSettingsChanged()"
             placeholder="Feedback prompt"/>
    </mat-input-container>
  </div>
</div>

<div class="divider"></div>

<convai-checker
   [inputId]="'checkerTextarea'"
   [demoSettings]="demoSettings"
   serverUrl="">
  Loading...
</convai-checker>
